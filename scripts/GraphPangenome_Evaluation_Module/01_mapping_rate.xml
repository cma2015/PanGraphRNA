<tool id="mapping_rate" name="Basic Alignment Statistics">
  <description></description>
  <command><![CDATA[
    #set file_list = list()
    #set file_name_list = list()
    #for $fileone in $Mapping_Files:
       $file_list.append(str($fileone.peak))
       $file_name_list.append(str($fileone.peak.name))
    #end for
    #set file_list_str = ",".join(file_list)
    #set file_name_list_str = ",".join(file_name_list)
    bash ${__tool_directory__}/0_mapping_rate.sh $outFile $file_list_str '$file_name_list_str' 
  ]]></command>

  <inputs>
    <repeat name="Mapping_Files" title="Summary file (Alignment)" min="1">
        <param name="peak" type="data" format="txt"  multiple="false" label="Summary file generated by hisat2" help=""/>
    </repeat>
        <param name="Fasta" type="data" format="fasta,fna,fa"  multiple="false" label="Input the reference genome file for preliminary path" help=""/>
  </inputs>

  <stdio>
        <exit_code range="1:"  level="fatal" description="Error Running combine collection to a file" />
  </stdio>
  <outputs> 
        <data name="outFile" format="txt" label= "Total_mapping_rate_info.txt">
        </data>
  </outputs>
  <help>
<![CDATA[
.. class:: infomark

**What it does**

This function is designed to obtain the bascic alignment information among multiple read-genome alignment result.

-----

.. class:: infomark

**Inputs**

- **Input TXT files:**  Input HISAT2 alignment reports in TXT format
- **Input FASTA files:**  Input reference genome annotation file for preliminary path in FASTA format

-----

.. class:: infomark

**Outputs**

- **Basic alignment statistics matrix in TXT format**


]]>
</help>
   <citations>
        <citation type="doi">10.1038/s41587-019-0201-4</citation>
    </citations>
</tool>