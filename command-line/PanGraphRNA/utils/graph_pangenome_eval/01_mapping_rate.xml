<tool id="mapping_rate" name="Basic Alignment Statistics">
  <description></description>
  <command><![CDATA[
    #set file_list = list()
    #set file_name_list = list()
    #for $fileone in $Mapping_Files:
       $file_list.append(str($fileone.peak))
       $file_name_list.append(str($fileone.peak.name))
    #end for
    #set file_list_str = ",".join(file_list)
    #set file_name_list_str = ",".join(file_name_list)
    bash ${__tool_directory__}/0_mapping_rate.sh $outFile $file_list_str '$file_name_list_str' 
  ]]></command>

  <inputs>
    <repeat name="Mapping_Files" title="Input HISAT2 alignment report file" min="1">
        <param name="peak" type="data" format="txt"  multiple="false" label="Alignment summary file generated by HISAT2" help=""/>
    </repeat>
        <param name="Fasta" type="data" format="fasta,fna,fa"  multiple="false" label="Input reference genome file for primary path of graph pangenome in FASTA format" help=""/>
  </inputs>

  <stdio>
        <exit_code range="1:"  level="fatal" description="Error Running combine collection to a file" />
  </stdio>
  <outputs> 
        <data name="outFile" format="txt" label= "Total_mapping_rate_info.txt">
        </data>
  </outputs>
  <help>
<![CDATA[
.. class:: infomark

**What it does**

This function is designed to count uniquely mapped reads, multiply mapped reads and calculate alignment rates among multiple read-genome alignment results.

-----

.. class:: infomark

**Inputs**

- **Input HISAT2 alignment report file:**  Input alignment summary files generated by HISAT2 in TXT format
- **Input reference genome file:**  Input reference genome file for primary path of graph pangenome in FASTA format

-----

.. class:: infomark

**Outputs**

- **Alignment information matrix in TXT format**


]]>
</help>
   <citations>
        <citation type="doi">10.1038/s41587-019-0201-4</citation>
    </citations>
</tool>